<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>KC Money Manager</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
:root{
  --main:#7b1fa2;
  --dark:#4a148c;
  --bg:#f3f4f7;
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:"Segoe UI",sans-serif;
  background:linear-gradient(135deg,#ede7f6,#f3e5f5);
  min-height:100vh;
  padding:25px;
}

h2{
  text-align:center;
  color:var(--dark);
  margin-bottom:25px;
}

button{
  cursor:pointer;
  border:none;
  border-radius:30px;
  padding:14px 28px;
  font-size:16px;
  font-weight:700;
  background:linear-gradient(135deg,var(--main),var(--dark));
  color:#fff;
  box-shadow:0 8px 20px rgba(123,31,162,.35);
  transition:.25s;
}

button:hover{
  transform:translateY(-2px);
  box-shadow:0 12px 28px rgba(123,31,162,.45);
}

#modal{
  position:fixed;
  inset:0;
  display:none;
  align-items:center;
  justify-content:center;
  background:rgba(0,0,0,.55);
  backdrop-filter:blur(4px);
  animation:fade .3s ease;
}

@keyframes fade{
  from{opacity:0} to{opacity:1}
}

#box{
  background:rgba(255,255,255,.96);
  width:95%;
  max-width:420px;
  border-radius:20px;
  padding:22px;
  box-shadow:0 15px 40px rgba(0,0,0,.25);
  animation:pop .35s ease;
}

@keyframes pop{
  from{transform:scale(.9);opacity:0}
  to{transform:scale(1);opacity:1}
}

#box h3{
  margin:0 0 15px;
  text-align:center;
  color:var(--dark);
}

input,select{
  width:100%;
  padding:13px 14px;
  margin:9px 0;
  border-radius:12px;
  border:1px solid #ccc;
  font-size:15px;
  transition:.2s;
}

input:focus,select:focus{
  outline:none;
  border-color:var(--main);
  box-shadow:0 0 0 3px rgba(123,31,162,.15);
}

.actions{
  display:flex;
  gap:10px;
  margin-top:12px;
}

.actions button{
  flex:1;
}

.cancel{
  background:#9e9e9e;
  box-shadow:none;
}

.cancel:hover{
  background:#757575;
  transform:none;
}
</style>
</head>

<body>

<h2>ðŸ’° KC Money Management</h2>

<div style="text-align:center">
  <button onclick="openForm()">âž• Add Entry</button>
</div>

<div id="modal">
  <div id="box">
    <h3>Add Transaction</h3>

    <input type="date" id="date">

    <select id="type">
      <option>Income</option>
      <option>Expenses</option>
      <option>Missing</option>
      <option>BOC Deposit</option>
      <option>Investment</option>
    </select>

    <input list="descs" id="desc" placeholder="Description">
    <datalist id="descs"></datalist>

    <input type="number" id="amount" placeholder="Amount (Rs.)">

    <div class="actions">
      <button onclick="save()">Save</button>
      <button class="cancel" onclick="closeForm()">Cancel</button>
    </div>
  </div>
</div>

<script>
const API="https://script.google.com/macros/s/AKfycbwugmgdPPSwILCjVwVmSyzPlUeha8ubf08FVQwZE8HsyHNHkA2YUiR4DNIe6igM3M9F/exec";

date.value=new Date().toISOString().split("T")[0];

// load description history
fetch(API).then(r=>r.json()).then(list=>{
  list.forEach(d=>{
    let o=document.createElement("option");
    o.value=d;
    descs.appendChild(o);
  });
});

function openForm(){modal.style.display="flex"}
function closeForm(){modal.style.display="none"}

function save(){
  if(!desc.value||!amount.value){
    alert("Please fill all fields");
    return;
  }

  fetch(API,{
    method:"POST",
    body:JSON.stringify({
      date:date.value,
      description:desc.value,
      type:type.value,
      amount:amount.value
    })
  }).then(()=>{
    alert("âœ… Saved successfully");
    closeForm();
    location.reload();
  });
}
</script>

</body>
</html>

